DEFINITION MODULE ENVRTNS;

  FROM FIO IMPORT MYFILTYP;
  FROM UTILLIB IMPORT BUFTYP;

  EXPORT QUALIFIED RDENV, GETPATH, OPNFIL;

PROCEDURE RDENV;
(* 
****************************** RDENV ****************************************
READ ENVIRONMENT STRING.
THE PURPOSE OF THIS ROUTINE IS TO READ THE ENVIRONMENT STRING AND PLACE IT INTO
ENVBUF.  RETCOD IS 0 IF OPERATION IS DONE SUCCESSFULLY.

*)

PROCEDURE GETPATH(VAR RETCOD:CARDINAL);
(* 
****************************** GETPATH *************************************
THIS ROUTINE EXAMINES THE ENVIRONMENT STRING UNTIL IT FINDS THE PATH STRING.
IF NO SUCH PATH IS FOUND, RETCOD = 1.

*)

PROCEDURE OPNFIL(VAR F:MYFILTYP; VAR FILNAM:BUFTYP; VAR RETCOD:CARDINAL);
(*
********************************* OPNFIL *************************************
OPEN FILE
THIS ROUTINE WILL SEARCH THE ENVIRONMENT'S PATH STRING FOR A GIVEN FILE NAME.
THE CURRENT DIRECTORY IS FIRST SEARCHED, AND IF UNSUCCESSFUL, THEN THE PATH
DIRECTORIES ARE SEARCHED IN ORDER OF OCCURRENCE.  IF THE INPUT FILNAM HAS
EITHER A DRIVE OR A SUBDIRECTORY SPECIFICATION OF ITS OWN, THEN THE PATH IS
NOT SEARCHED.  IF THE FILE IS NOT FOUND IN THE SPECIFIED DRIVE AND/OR 
SUBDIRECTORY, THIS ROUTINE WILL EXIT WITH THE FILE NOT FOUND RETURN CODE.

RETCOD : 0--MEANS NORMAL RETURN.  FILE WAS FOUND.  FULL FILENAME INCLUDING
            SUBDIRECTORY WHERE FILE WAS FOUND RETURNED IN FILNAM BUFFER.
         1--FILE NOT FOUND.
         2--ERROR OTHER THAN FILE NOT FOUND RETURNED FROM THE LOOKUP PROCEDURE.
*)

END ENVRTNS.

